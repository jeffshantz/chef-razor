# This is the standard Apache Shiro authentication configuration file.
# http://shiro.apache.org/configuration.html
#
# Note: Do not add users directly here.  You must add users to
# node[:razor][:api_users].  See the README.md in the Razor cookbook for more
# details.
#
# Note that passwords should be hashed and salted.  The cookbook installs a
# utility (shiro-tools-hasher) in node[:razor][:install_dir] (/opt/razor by
# default), which can be used to generate the hashed password.
#
# cd /opt/razor
# java -jar shiro-tools-hasher-1.2.3-cli.jar -p
#
# Once you have a password generated, add the username and hashed password to
# node[:razor][:api_users].
#
# Generated by Chef for <%= node['fqdn'] %>
# Local modifications will be overwritten.

[main]
passwordMatcher = org.apache.shiro.authc.credential.PasswordMatcher
iniRealm.credentialsMatcher = $passwordMatcher

[users]
<% node[:razor][:api_users].each do |user| -%>
<%= user[:username] %> = <%= user[:password] %><%= ",admin" unless user[:username] == node[:razor][:bootstrap_user] %>
<% end -%>

[roles]
admin = *

